name: release
description: release r2sync
inputs:
  tag:
    description: tag name to be released
    default: ''
  cargo_token:
    description: cargo token
    required: true
runs:
  using: composite
  steps:
  - name: release
    run: |
      cargo login "$CARGO_TOKEN"
      cargo publish
    shell: bash
    env:
      INPUT_TAG: ${{ inputs.tag }}
      CARGO_TOKEN: ${{ inputs.cargo_token }}
      GITHUB_TOKEN: ${{ github.token }}
  - uses: haya14busa/action-update-semver@v1
    with:
      major_version_tag_only: true
